"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.NumberInput = void 0;

var _graphql = require("graphql");

const id = value => value;

const NumberInput = new _graphql.GraphQLScalarType({
  name: 'NumberInput',
  description: `Input for number
  Supported schemas:

  - key: 1
  - key: {increment: 1}
  `,
  serialize: id,
  parseValue: id,
  parseLiteral: ast => {
    if (ast.kind == _graphql.Kind.OBJECT) {
      const fields = ast.fields;

      if (fields.length != 1) {
        throw 'Invalid literal for NumberInput (too many fields)';
      }

      const field = fields[0];
      const operator = field.name.value;

      if (operator != 'increment') {
        throw `the ${operator} operator is not supported`;
      }

      const value = field.value.value;
      return {
        __op: 'Increment',
        amount: parseFloat(value)
      };
    } else if (ast.kind == _graphql.Kind.INT || ast.kind == _graphql.Kind.FLOAT) {
      return parseFloat(ast.value);
    } else {
      throw 'Invalid literal for NumberInput';
    }
  }
});
exports.NumberInput = NumberInput;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ncmFwaHFsL3R5cGVzL051bWJlcklucHV0LmpzIl0sIm5hbWVzIjpbImlkIiwidmFsdWUiLCJOdW1iZXJJbnB1dCIsIkdyYXBoUUxTY2FsYXJUeXBlIiwibmFtZSIsImRlc2NyaXB0aW9uIiwic2VyaWFsaXplIiwicGFyc2VWYWx1ZSIsInBhcnNlTGl0ZXJhbCIsImFzdCIsImtpbmQiLCJLaW5kIiwiT0JKRUNUIiwiZmllbGRzIiwibGVuZ3RoIiwiZmllbGQiLCJvcGVyYXRvciIsIl9fb3AiLCJhbW91bnQiLCJwYXJzZUZsb2F0IiwiSU5UIiwiRkxPQVQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLEtBQUssSUFBSUEsS0FBcEI7O0FBRU8sTUFBTUMsV0FBVyxHQUFHLElBQUlDLDBCQUFKLENBQXNCO0FBQy9DQyxFQUFBQSxJQUFJLEVBQUUsYUFEeUM7QUFFL0NDLEVBQUFBLFdBQVcsRUFBRzs7Ozs7R0FGaUM7QUFRL0NDLEVBQUFBLFNBQVMsRUFBRU4sRUFSb0M7QUFTL0NPLEVBQUFBLFVBQVUsRUFBRVAsRUFUbUM7QUFVL0NRLEVBQUFBLFlBQVksRUFBRUMsR0FBRyxJQUFJO0FBQ25CLFFBQUlBLEdBQUcsQ0FBQ0MsSUFBSixJQUFZQyxjQUFLQyxNQUFyQixFQUE2QjtBQUMzQixZQUFNQyxNQUFNLEdBQUdKLEdBQUcsQ0FBQ0ksTUFBbkI7O0FBQ0EsVUFBSUEsTUFBTSxDQUFDQyxNQUFQLElBQWlCLENBQXJCLEVBQXdCO0FBQ3RCLGNBQU0sbURBQU47QUFDRDs7QUFDRCxZQUFNQyxLQUFLLEdBQUdGLE1BQU0sQ0FBQyxDQUFELENBQXBCO0FBQ0EsWUFBTUcsUUFBUSxHQUFHRCxLQUFLLENBQUNYLElBQU4sQ0FBV0gsS0FBNUI7O0FBQ0EsVUFBSWUsUUFBUSxJQUFJLFdBQWhCLEVBQTZCO0FBQzNCLGNBQU8sT0FBTUEsUUFBUyw0QkFBdEI7QUFDRDs7QUFDRCxZQUFNZixLQUFLLEdBQUdjLEtBQUssQ0FBQ2QsS0FBTixDQUFZQSxLQUExQjtBQUNBLGFBQU87QUFBRWdCLFFBQUFBLElBQUksRUFBRSxXQUFSO0FBQXFCQyxRQUFBQSxNQUFNLEVBQUVDLFVBQVUsQ0FBQ2xCLEtBQUQ7QUFBdkMsT0FBUDtBQUNELEtBWkQsTUFZTyxJQUFJUSxHQUFHLENBQUNDLElBQUosSUFBWUMsY0FBS1MsR0FBakIsSUFBd0JYLEdBQUcsQ0FBQ0MsSUFBSixJQUFZQyxjQUFLVSxLQUE3QyxFQUFvRDtBQUN6RCxhQUFPRixVQUFVLENBQUNWLEdBQUcsQ0FBQ1IsS0FBTCxDQUFqQjtBQUNELEtBRk0sTUFFQTtBQUNMLFlBQU0saUNBQU47QUFDRDtBQUNGO0FBNUI4QyxDQUF0QixDQUFwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdyYXBoUUxTY2FsYXJUeXBlLCBLaW5kIH0gZnJvbSAnZ3JhcGhxbCc7XG5cbmNvbnN0IGlkID0gdmFsdWUgPT4gdmFsdWU7XG5cbmV4cG9ydCBjb25zdCBOdW1iZXJJbnB1dCA9IG5ldyBHcmFwaFFMU2NhbGFyVHlwZSh7XG4gIG5hbWU6ICdOdW1iZXJJbnB1dCcsXG4gIGRlc2NyaXB0aW9uOiBgSW5wdXQgZm9yIG51bWJlclxuICBTdXBwb3J0ZWQgc2NoZW1hczpcblxuICAtIGtleTogMVxuICAtIGtleToge2luY3JlbWVudDogMX1cbiAgYCxcbiAgc2VyaWFsaXplOiBpZCxcbiAgcGFyc2VWYWx1ZTogaWQsXG4gIHBhcnNlTGl0ZXJhbDogYXN0ID0+IHtcbiAgICBpZiAoYXN0LmtpbmQgPT0gS2luZC5PQkpFQ1QpIHtcbiAgICAgIGNvbnN0IGZpZWxkcyA9IGFzdC5maWVsZHM7XG4gICAgICBpZiAoZmllbGRzLmxlbmd0aCAhPSAxKSB7XG4gICAgICAgIHRocm93ICdJbnZhbGlkIGxpdGVyYWwgZm9yIE51bWJlcklucHV0ICh0b28gbWFueSBmaWVsZHMpJztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpZWxkID0gZmllbGRzWzBdO1xuICAgICAgY29uc3Qgb3BlcmF0b3IgPSBmaWVsZC5uYW1lLnZhbHVlO1xuICAgICAgaWYgKG9wZXJhdG9yICE9ICdpbmNyZW1lbnQnKSB7XG4gICAgICAgIHRocm93IGB0aGUgJHtvcGVyYXRvcn0gb3BlcmF0b3IgaXMgbm90IHN1cHBvcnRlZGA7XG4gICAgICB9XG4gICAgICBjb25zdCB2YWx1ZSA9IGZpZWxkLnZhbHVlLnZhbHVlO1xuICAgICAgcmV0dXJuIHsgX19vcDogJ0luY3JlbWVudCcsIGFtb3VudDogcGFyc2VGbG9hdCh2YWx1ZSkgfTtcbiAgICB9IGVsc2UgaWYgKGFzdC5raW5kID09IEtpbmQuSU5UIHx8IGFzdC5raW5kID09IEtpbmQuRkxPQVQpIHtcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KGFzdC52YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93ICdJbnZhbGlkIGxpdGVyYWwgZm9yIE51bWJlcklucHV0JztcbiAgICB9XG4gIH0sXG59KTtcbiJdfQ==